# å®æ—¶æµé‡å¼‚å¸¸æ£€æµ‹å®ç°æ€»ç»“

## ğŸ“Š æ ¸å¿ƒå®ç°æ¨¡å—

### 1. ç‰¹å¾æå–æ¨¡å— (`feature_extractor.py`)

**åŠŸèƒ½**: ä»å®æ—¶æµé‡æ•°æ®ä¸­æå–15ç»´ç‰¹å¾å‘é‡

**æå–çš„ç‰¹å¾**:
- åŸºç¡€æµé‡: æ€»å­—èŠ‚æ•°ã€æ€»åŒ…æ•°ã€å‘é€/æ¥æ”¶æ¯”ä¾‹
- æ—¶é—´ç‰¹å¾: å°æ—¶ã€æ˜ŸæœŸã€åˆ†é’Ÿï¼ˆå½’ä¸€åŒ–ï¼‰
- åè®®ç«¯å£: åè®®ç¼–ç ã€çŸ¥åç«¯å£æ ‡å¿—ã€ç«¯å£å½’ä¸€åŒ–
- TCPç‰¹å¾: SYNåŒ…æ¯”ä¾‹
- IPç»Ÿè®¡: å”¯ä¸€ç›®æ ‡æ•°ã€å”¯ä¸€ç«¯å£æ•°ã€åŒ…é€Ÿç‡ã€å­—èŠ‚é€Ÿç‡

**å…³é”®æ–¹æ³•**:
- `extract_features_from_traffic()`: æå–è¿æ¥çº§åˆ«ç‰¹å¾
- `extract_aggregated_features()`: æå–èšåˆç‰¹å¾ï¼ˆç”¨äºè§„åˆ™åŒ¹é…ï¼‰

### 2. å®æ—¶å¼‚å¸¸æ£€æµ‹æ¨¡å— (`realtime_anomaly_detector.py`)

**åŠŸèƒ½**: ç»“åˆAIæ¨¡å‹å’Œè§„åˆ™åŒ¹é…è¿›è¡Œå®æ—¶å¼‚å¸¸æ£€æµ‹

**AIæ¨¡å‹**:
1. **Isolation Forest**
   - contamination=0.02ï¼ˆå‡è®¾2%å¼‚å¸¸ï¼‰
   - è¾“å‡º: predictions (-1=å¼‚å¸¸, 1=æ­£å¸¸), anomaly_scores

2. **DBSCANèšç±»**
   - eps=0.5, min_samples=5
   - å™ªå£°ç‚¹(label=-1)åˆ¤å®šä¸ºå¼‚å¸¸

3. **K-Meansèšç±»**ï¼ˆå¤‡ç”¨ï¼‰
   - n_clusters=5
   - è·ç¦»ç°‡ä¸­å¿ƒè¾ƒè¿œçš„ç‚¹åˆ¤å®šä¸ºå¼‚å¸¸

**è§„åˆ™åŒ¹é…**:
- ç«¯å£æ‰«æ: `syn_ratio > 0.8 && unique_dst > 10`
- DDoSæ”»å‡»: `connections > 100 in 5_minutes`

**é£é™©è®¡ç®—**:
```
Risk = 2.0 Ã— f_syn + 1.5 Ã— f_dst + 3.0 Ã— anomaly_score
é£é™©ç­‰çº§: high(â‰¥70), medium(40-70), low(<40)
```

### 3. æ•°æ®é‡‡é›†æ¨¡å—é›†æˆ (`data_collector.py`)

**æµç¨‹**:
1. é‡‡é›†æµé‡æ•°æ®ï¼ˆWireshark/psutilï¼‰
2. ä¸°å¯Œæ•°æ®ï¼ˆæ·»åŠ è¿æ¥çº§åˆ«ä¿¡æ¯ï¼‰
3. å¹¶è¡Œæ£€æµ‹ï¼š
   - è§„åˆ™åŒ¹é…æ£€æµ‹
   - AIæ¨¡å‹æ£€æµ‹ï¼ˆIsolation Forest + èšç±»ï¼‰
4. äº‹ä»¶åˆ†ç±»å’Œé£é™©è®¡ç®—
5. ä¿å­˜åˆ°æ•°æ®åº“

## ğŸ”„ å®æ—¶æ£€æµ‹æµç¨‹

```
æ¯5ç§’å¾ªç¯:
â”œâ”€ è·å–æµé‡æ•°æ®
â”œâ”€ ä¸°å¯Œè¿æ¥ä¿¡æ¯
â”œâ”€ ç‰¹å¾æå–
â”œâ”€ AIæ¨¡å‹æ£€æµ‹
â”‚  â”œâ”€ Isolation Forest â†’ å¼‚å¸¸åˆ†æ•°
â”‚  â”œâ”€ DBSCAN/K-Means â†’ èšç±»å¼‚å¸¸
â”‚  â””â”€ è§„åˆ™åŒ¹é… â†’ ç«¯å£æ‰«æ/DDoS
â”œâ”€ äº‹ä»¶åˆ†ç±»
â”œâ”€ é£é™©è®¡ç®—
â””â”€ ä¿å­˜åˆ°eventsè¡¨
```

## ğŸ“ˆ äº‹ä»¶åˆ†ç±»é€»è¾‘

```python
if syn_ratio > 0.8 and unique_dst > 10:
    event_type = "PortScan"
elif connections > 100:
    event_type = "DDoSAttack"
elif isolation_forest_detected:
    event_type = "SuspiciousTraffic"
elif clustering_detected:
    event_type = "AnomalousPattern"
else:
    event_type = "UnknownAnomaly"
```

## ğŸ’¾ æ•°æ®åº“å­˜å‚¨

æ£€æµ‹åˆ°çš„äº‹ä»¶è‡ªåŠ¨ä¿å­˜åˆ° `events` è¡¨:
- event_type: äº‹ä»¶ç±»å‹
- src_ip, dst_ip: IPåœ°å€
- risk_level: é£é™©ç­‰çº§ (low/medium/high)
- confidence: ç½®ä¿¡åº¦ (0.0-1.0)
- detection_method: æ£€æµ‹æ–¹æ³•

## ğŸ¯ å…³é”®å‚æ•°é…ç½®

**Isolation Forest**:
- contamination=0.02ï¼ˆ2%å¼‚å¸¸æ¯”ä¾‹ï¼‰
- n_estimators=100ï¼ˆæ ‘çš„æ•°é‡ï¼‰

**é£é™©æƒé‡**:
- w_syn=2.0ï¼ˆSYNæ¯”ä¾‹æƒé‡ï¼‰
- w_dst=1.5ï¼ˆç›®æ ‡æ•°é‡æƒé‡ï¼‰
- w_anomaly=3.0ï¼ˆå¼‚å¸¸åˆ†æ•°æƒé‡ï¼‰

## ğŸ“š ç›¸å…³æ–‡æ¡£

è¯¦ç»†æŠ€æœ¯æ–‡æ¡£: `docs/realtime_anomaly_detection.md`

